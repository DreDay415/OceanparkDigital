---
// Generates random stars for the parallax effect, replicating the Sass function
function generateBoxShadow(n: number) {
  let value = `${Math.floor(Math.random() * 2000)}px ${Math.floor(Math.random() * 2000)}px #FFF`;
  for (let i = 2; i <= n; i++) {
    value += `, ${Math.floor(Math.random() * 2000)}px ${Math.floor(Math.random() * 2000)}px #FFF`;
  }
  return value;
}

const shadowsSmall = generateBoxShadow(700);
const shadowsMedium = generateBoxShadow(200);
const shadowsBig = generateBoxShadow(100);
---

<div id="star-background" class="fixed inset-0 overflow-hidden pointer-events-none opacity-100 transition-opacity duration-1000 z-0 bg-transparent">
  <div id="stars"></div>
  <div id="stars2"></div>
  <div id="stars3"></div>
</div>

<style define:vars={{ shadowsSmall, shadowsMedium, shadowsBig }}>
  #star-background {
      background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
  }

  #stars {
    width: 1px;
    height: 1px;
    background: transparent;
    box-shadow: var(--shadowsSmall);
    animation: animStar 50s linear infinite;
  }
  
  #stars:after {
    content: " ";
    position: absolute;
    top: 2000px;
    width: 1px;
    height: 1px;
    background: transparent;
    box-shadow: var(--shadowsSmall);
  }
  
  #stars2 {
    width: 2px;
    height: 2px;
    background: transparent;
    box-shadow: var(--shadowsMedium);
    animation: animStar 100s linear infinite;
  }
  
  #stars2:after {
    content: " ";
    position: absolute;
    top: 2000px;
    width: 2px;
    height: 2px;
    background: transparent;
    box-shadow: var(--shadowsMedium);
  }
  
  #stars3 {
    width: 3px;
    height: 3px;
    background: transparent;
    box-shadow: var(--shadowsBig);
    animation: animStar 150s linear infinite;
  }
  
  #stars3:after {
    content: " ";
    position: absolute;
    top: 2000px;
    width: 3px
    height: 3px;
    background: transparent;
    box-shadow: var(--shadowsBig);
  }

  @keyframes animStar {
    from {
      transform: translateY(0px);
    }
    to {
      transform: translateY(-2000px);
    }
  }
</style>
